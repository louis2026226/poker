---
description: 提交前检查，避免误删大量代码导致界面/功能错乱
alwaysApply: true
---

# 安全提交规范

## 提交前必做

1. **看变更规模**：修改 `public/game.js` 或 `public/style.css` 时，先运行 `git diff --stat`。若单文件净删除超过约 200 行，必须暂停并人工确认是否误删。
2. **小步提交**：一次只做一类修改（例如只改倒计时 或 只改筹码落点），便于出问题时定位和回滚。
3. **不整文件替换**：不要用“整段删除再粘贴”的方式改大文件；优先用精确的查找替换或小块编辑，避免误删无关逻辑。

## 若 AI 或编辑器生成了大段删除

- 先不要 commit，用 `git diff public/game.js`（或对应文件）逐段检查删除内容。
- 确认是否包含：渲染函数、DOM 更新、关键 id/class、样式布局等。若有疑问，回退该文件（`git checkout -- 文件名`）再重新做最小改动。

## 回滚参考

- 回滚单个文件到上一版本：`git checkout <上一版 commit> -- 文件路径`
- 回滚整个项目到上一版本：`git reset --hard <commit>`（慎用，会丢未提交改动）
